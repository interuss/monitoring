$content_schema: monitoring/uss_qualifier/configurations/configuration/USSQualifierConfiguration.json
v1:
  test_run:
    resources:
      resource_declarations:
        # Auth adapter for making authenticated requests
        utm_auth:
          resource_type: resources.communications.AuthAdapterResource
          specification:
            environment_variable_containing_auth_spec: AUTH_SPEC
            scopes_authorized:
              - rid.inject_test_data
              - rid.service_provider
              - rid.display_provider

        # Client identity resource
        utm_client_identity:
          resource_type: resources.communications.ClientIdentityResource
          dependencies:
            auth_adapter: utm_auth
          specification:
            whoami_audience: localhost
            whoami_scope: rid.display_provider

        # Airwayz RID Service Provider
        airwayz_rid_service:
          resource_type: resources.netrid.NetRIDServiceProviders
          dependencies:
            auth_adapter: utm_auth
          specification:
            service_providers:
              - participant_id: airwayz
                injection_base_url: http://localhost:5000/uss/flights

        # ID generator for test data
        id_generator:
          resource_type: resources.interuss.IDGeneratorResource
          dependencies:
            client_identity: utm_client_identity
          specification:
            id_generator_type: uuid4

    # Define what test to run
    action:
      test_suite:
        suite_definition:
          name: Airwayz RID Test
          resources:
            service_providers: resources.netrid.NetRIDServiceProviders
            utm_client_identity: resources.communications.ClientIdentityResource
            id_generator: resources.interuss.IDGeneratorResource
          actions:
            []
            # TODO: Add actual RID test scenarios here
            # Example: - test_scenario:
            #            scenario_type: scenarios.astm.netrid.v22a.dss.ISAValidation
            #            resources:
            #              dss_instances: dss_instances

        resources:
          service_providers: airwayz_rid_service
          utm_client_identity: utm_client_identity
          id_generator: id_generator

  # Artifacts to generate
  artifacts:
    raw_report:
      indent: 2
    # sequence_view: {}
    report_html: {}

  # Validation criteria
  validation:
    criteria:
      - applicability:
          skip_reason: {}
        pass_condition:
          each_element:
            has_field:
              name: skip_reason
