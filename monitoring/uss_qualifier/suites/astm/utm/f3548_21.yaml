name: ASTM F3548-21
resources:
  flight_planners: resources.flight_planning.FlightPlannersResource
  dss: resources.astm.f3548.v21.DSSInstanceResource
  dss_instances: resources.astm.f3548.v21.DSSInstancesResource?
  conflicting_flights: resources.flight_planning.FlightIntentsResource
  priority_preemption_flights: resources.flight_planning.FlightIntentsResource?
  invalid_flight_intents: resources.flight_planning.FlightIntentsResource
  non_conflicting_flights: resources.flight_planning.FlightIntentsResource
  nominal_planning_selector: resources.flight_planning.FlightPlannerCombinationSelectorResource?
  priority_planning_selector: resources.flight_planning.FlightPlannerCombinationSelectorResource?
  mock_uss: resources.interuss.mock_uss.client.MockUSSResource
actions:
- action_generator:
    generator_type: action_generators.astm.f3548.ForEachDSS
    resources:
      dss_instances: dss_instances
    specification:
      action_to_repeat:
        test_suite:
          suite_type: suites.astm.utm.dss_probing
          resources:
            dss: dss
            all_dss_instances: dss_instances
        on_failure: Continue
      dss_instances_source: dss_instances
      dss_instance_id: dss
    on_failure: Continue
- test_scenario:
    scenario_type: scenarios.astm.utm.PrepareFlightPlanners
    resources:
      flight_planners: flight_planners
      dss: dss
      flight_intents: invalid_flight_intents
      flight_intents2: priority_preemption_flights
      flight_intents3: conflicting_flights
      flight_intents4: non_conflicting_flights
  on_failure: Abort
- action_generator:
    generator_type: action_generators.flight_planning.FlightPlannerCombinations
    resources:
      flight_planners: flight_planners
      flight_intent_validation_selector: flight_intent_validation_selector?
      invalid_flight_intents: invalid_flight_intents
      dss: dss
    specification:
      action_to_repeat:
        test_scenario:
          scenario_type: scenarios.astm.utm.FlightIntentValidation
          resources:
            flight_intents: invalid_flight_intents
            tested_uss: uss1
            dss: dss
        on_failure: Continue
      combination_selector_source: flight_intent_validation_selector
      flight_planners_source: flight_planners
      roles:
        - uss1
  on_failure: Continue
- action_generator:
    generator_type: action_generators.flight_planning.FlightPlannerCombinations
    resources:
      flight_planners: flight_planners
      priority_planning_selector: priority_planning_selector?
      priority_preemption_flights: priority_preemption_flights
      dss: dss
    specification:
      action_to_repeat:
        test_scenario:
          scenario_type: scenarios.astm.utm.ConflictHigherPriority
          resources:
            flight_intents: priority_preemption_flights
            tested_uss: uss1
            control_uss: uss2
            dss: dss
        on_failure: Continue
      combination_selector_source: priority_planning_selector
      flight_planners_source: flight_planners
      roles:
        - uss1
        - uss2
  on_failure: Continue
- action_generator:
    generator_type: action_generators.flight_planning.FlightPlannerCombinations
    resources:
      flight_planners: flight_planners
      nominal_planning_selector: nominal_planning_selector?
      conflicting_flights: conflicting_flights
      dss: dss
    specification:
      action_to_repeat:
        test_scenario:
          scenario_type: scenarios.astm.utm.ConflictEqualPriorityNotPermitted
          resources:
            flight_intents: conflicting_flights
            tested_uss: uss1
            control_uss: uss2
            dss: dss
        on_failure: Continue
      combination_selector_source: nominal_planning_selector
      flight_planners_source: flight_planners
      roles:
        - uss1
        - uss2
  on_failure: Continue
- action_generator:
    generator_type: action_generators.flight_planning.FlightPlannerCombinations
    resources:
      flight_planners: flight_planners
      non_conflicting_flights: non_conflicting_flights
      dss: dss
      mock_uss: mock_uss
    specification:
      action_to_repeat:
        test_scenario:
          scenario_type: scenarios.astm.utm.data_exchange_validation.GetOpResponseDataValidationByUSS
          resources:
            tested_uss: uss1
            control_uss: mock_uss
            dss: dss
            flight_intents: non_conflicting_flights
        on_failure: Continue
      flight_planners_source: flight_planners
      roles:
        - uss1
  on_failure: Continue
- action_generator:
    generator_type: action_generators.flight_planning.FlightPlannerCombinations
    resources:
      flight_planners: flight_planners
      nominal_planning_selector: nominal_planning_selector?
      conflicting_flights: conflicting_flights
      dss: dss
    specification:
      action_to_repeat:
        test_scenario:
          scenario_type: scenarios.astm.utm.DownUSS
          resources:
            flight_intents: conflicting_flights
            tested_uss: uss1
            dss: dss
        on_failure: Continue
      combination_selector_source: nominal_planning_selector
      flight_planners_source: flight_planners
      roles:
        - uss1
  on_failure: Continue
- action_generator:
    generator_type: action_generators.flight_planning.FlightPlannerCombinations
    resources:
      flight_planners: flight_planners
      nominal_planning_selector: nominal_planning_selector?
      conflicting_flights_no_equal_prio: conflicting_flights_no_equal_prio
      dss: dss
    specification:
      action_to_repeat:
        test_scenario:
          scenario_type: scenarios.astm.utm.DownUSSEqualPriorityNotPermitted
          resources:
            flight_intents: conflicting_flights_no_equal_prio
            tested_uss: uss1
            dss: dss
        on_failure: Continue
      combination_selector_source: nominal_planning_selector
      flight_planners_source: flight_planners
      roles:
        - uss1
  on_failure: Continue
- test_scenario:
    scenario_type: scenarios.astm.utm.AggregateChecks
    resources:
      flight_planners: flight_planners

participant_verifiable_capabilities:
  - id: scd
    name: Strategic Conflict Detection
    description: Participant fulfills testable requirements necessary to perform the Strategic Conflict Detection role.
    verification_condition:
      requirements_checked:
          checked:
              requirement_sets:
                  - "astm.f3548.v21.scd#Automated verification"
  - id: no_failures
    name: Fails No Existing Tests
    description: Until testing coverage is sufficiently complete to verify all intended requirements for particular roles, this capability may be useful in communicating that the participant has passed all existing applicable tests for their role and capabilities.  This capability should be removed once test coverage extends to all intended requirements.
    verification_condition:
        no_failed_checks: {}
